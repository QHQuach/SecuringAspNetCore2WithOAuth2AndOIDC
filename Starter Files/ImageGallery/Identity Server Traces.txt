Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager:Information: User profile is available. Using 'C:\Users\Quang.Quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
IdentityServer4.Startup:Information: Starting IdentityServer4 version 2.4.0.0
IdentityServer4.Startup:Information: You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
IdentityServer4.Startup:Information: Using the default authentication scheme idsrv for IdentityServer
IdentityServer4.Startup:Debug: Using idsrv as default ASP.NET Core scheme for authentication
IdentityServer4.Startup:Debug: Using idsrv as default ASP.NET Core scheme for sign-in
IdentityServer4.Startup:Debug: Using idsrv as default ASP.NET Core scheme for sign-out
IdentityServer4.Startup:Debug: Using idsrv as default ASP.NET Core scheme for challenge
IdentityServer4.Startup:Debug: Using idsrv as default ASP.NET Core scheme for forbid
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/2.0 GET https://localhost:44314/
IdentityServer4.Startup:Debug: Login Url: /Account/Login
IdentityServer4.Startup:Debug: Login Return Url Parameter: ReturnUrl
IdentityServer4.Startup:Debug: Logout Url: /Account/Logout
IdentityServer4.Startup:Debug: ConsentUrl Url: /consent
IdentityServer4.Startup:Debug: Consent Return Url Parameter: returnUrl
IdentityServer4.Startup:Debug: Error Url: /home/error
IdentityServer4.Startup:Debug: Error Id Parameter: errorId
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Route matched with {action = "Index", controller = "Home"}. Executing action IdentityServer4.Quickstart.UI.HomeController.Index (Marvin.IDP)
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executing action method IdentityServer4.Quickstart.UI.HomeController.Index (Marvin.IDP) - Validation state: Valid
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action method IdentityServer4.Quickstart.UI.HomeController.Index (Marvin.IDP), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.2238ms.
Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor:Information: Executing ViewResult, running view Index.
Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor:Information: Executed ViewResult - view Index executed in 137.7215ms.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action IdentityServer4.Quickstart.UI.HomeController.Index (Marvin.IDP) in 323.891ms
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 555.5252ms 200 text/html; charset=utf-8

QQHQ :: STARTED

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/2.0 GET https://localhost:44314/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dimagegalleryclient%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A44393%252Fsignin-oidc%26response_type%3Dcode%2520id_token%26scope%3Dopenid%2520profile%2520address%2520roles%2520country%2520subscriptionlevel%2520imagegalleryapi%2520offline_access%26response_mode%3Dform_post%26nonce%3D636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx%26state%3DCfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D5.3.0.0
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Marvin.IDP)
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Marvin.IDP) with arguments (/connect/authorize/callback?client_id=imagegalleryclient&redirect_uri=https%3A%2F%2Flocalhost%3A44393%2Fsignin-oidc&response_type=code%20id_token&scope=openid%20profile%20address%20roles%20country%20subscriptionlevel%20imagegalleryapi%20offline_access&response_mode=form_post&nonce=636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx&state=CfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=5.3.0.0) - Validation state: Valid
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Start authorize request protocol validation
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Checking for PKCE parameters
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: No PKCE used.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Marvin.IDP), returned result Microsoft.AspNetCore.Mvc.ViewResult in 92.3572ms.
Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor:Information: Executing ViewResult, running view Login.
Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor:Information: Executed ViewResult - view Login executed in 97.4966ms.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Marvin.IDP) in 252.172ms
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 326.5101ms 200 text/html; charset=utf-8

QQHQ :: LOGIN PAGE SHOWN

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/2.0 POST https://localhost:44314/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dimagegalleryclient%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A44393%252Fsignin-oidc%26response_type%3Dcode%2520id_token%26scope%3Dopenid%2520profile%2520address%2520roles%2520country%2520subscriptionlevel%2520imagegalleryapi%2520offline_access%26response_mode%3Dform_post%26nonce%3D636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx%26state%3DCfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D5.3.0.0 application/x-www-form-urlencoded 1131
IdentityServer4.Hosting.CorsPolicyProvider:Debug: CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Marvin.IDP)
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Marvin.IDP) with arguments (IdentityServer4.Quickstart.UI.LoginInputModel, login) - Validation state: Valid
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Start authorize request protocol validation
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Checking for PKCE parameters
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: No PKCE used.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
IdentityServer4.Hosting.IdentityServerAuthenticationService:Debug: Augmenting SignInContext
IdentityServer4.Hosting.IdentityServerAuthenticationService:Debug: Adding idp claim with value: local
IdentityServer4.Hosting.IdentityServerAuthenticationService:Debug: Adding amr claim with value: pwd
Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler:Information: AuthenticationScheme: idsrv signed in.
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Marvin.IDP), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 56.9571ms.
Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor:Information: Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=imagegalleryclient&redirect_uri=https%3A%2F%2Flocalhost%3A44393%2Fsignin-oidc&response_type=code%20id_token&scope=openid%20profile%20address%20roles%20country%20subscriptionlevel%20imagegalleryapi%20offline_access&response_mode=form_post&nonce=636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx&state=CfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=5.3.0.0.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Marvin.IDP) in 119.9601ms
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 146.1023ms 302

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/2.0 GET https://localhost:44314/connect/authorize/callback?client_id=imagegalleryclient&redirect_uri=https%3A%2F%2Flocalhost%3A44393%2Fsignin-oidc&response_type=code%20id_token&scope=openid%20profile%20address%20roles%20country%20subscriptionlevel%20imagegalleryapi%20offline_access&response_mode=form_post&nonce=636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx&state=CfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=5.3.0.0
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/authorize/callback matched to endpoint type Authorize
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
IdentityServer4.Endpoints.AuthorizeCallbackEndpoint:Debug: Start authorize callback request
IdentityServer4.Endpoints.AuthorizeCallbackEndpoint:Debug: User in authorize request: b7539694-97e7-4dfe-84da-b4256e1ff5c7
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Start authorize request protocol validation
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Checking for PKCE parameters
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: No PKCE used.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
IdentityServer4.Endpoints.AuthorizeCallbackEndpoint:Information: ValidatedAuthorizeRequest
{
  "ClientId": "imagegalleryclient",
  "ClientName": "Image Gallery",
  "RedirectUri": "https://localhost:44393/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:44393/signin-oidc"
  ],
  "SubjectId": "b7539694-97e7-4dfe-84da-b4256e1ff5c7",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile address roles country subscriptionlevel imagegalleryapi offline_access",
  "State": "CfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA",
  "Nonce": "636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx",
  "SessionId": "5b73657e8454150cc39436120d1a4224",
  "Raw": {
    "client_id": "imagegalleryclient",
    "redirect_uri": "https://localhost:44393/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile address roles country subscriptionlevel imagegalleryapi offline_access",
    "response_mode": "form_post",
    "nonce": "636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx",
    "state": "CfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA",
    "x-client-SKU": "ID_NETSTANDARD2_0",
    "x-client-ver": "5.3.0.0"
  }
}
IdentityServer4.Test.TestUserProfileService:Debug: IsActive called from: AuthorizeEndpoint
IdentityServer4.Services.DefaultConsentService:Debug: Scopes contains offline_access, consent is required
IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator:Information: Showing consent: User has not yet consented
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 79.2538ms 302

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/2.0 GET https://localhost:44314/consent?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dimagegalleryclient%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A44393%252Fsignin-oidc%26response_type%3Dcode%2520id_token%26scope%3Dopenid%2520profile%2520address%2520roles%2520country%2520subscriptionlevel%2520imagegalleryapi%2520offline_access%26response_mode%3Dform_post%26nonce%3D636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx%26state%3DCfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D5.3.0.0
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Route matched with {action = "Index", controller = "Consent"}. Executing action IdentityServer4.Quickstart.UI.ConsentController.Index (Marvin.IDP)
Microsoft.AspNetCore.Authorization.DefaultAuthorizationService:Information: Authorization was successful.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executing action method IdentityServer4.Quickstart.UI.ConsentController.Index (Marvin.IDP) with arguments (/connect/authorize/callback?client_id=imagegalleryclient&redirect_uri=https%3A%2F%2Flocalhost%3A44393%2Fsignin-oidc&response_type=code%20id_token&scope=openid%20profile%20address%20roles%20country%20subscriptionlevel%20imagegalleryapi%20offline_access&response_mode=form_post&nonce=636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx&state=CfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=5.3.0.0) - Validation state: Valid
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Start authorize request protocol validation
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Checking for PKCE parameters
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: No PKCE used.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action method IdentityServer4.Quickstart.UI.ConsentController.Index (Marvin.IDP), returned result Microsoft.AspNetCore.Mvc.ViewResult in 20.8352ms.
Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor:Information: Executing ViewResult, running view Index.
Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor:Information: Executed ViewResult - view Index executed in 79.8951ms.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action IdentityServer4.Quickstart.UI.ConsentController.Index (Marvin.IDP) in 144.4881ms
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 155.2442ms 200 text/html; charset=utf-8

QQHQ :: CONSENT PAGE SHOWN

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/2.0 POST https://localhost:44314/consent application/x-www-form-urlencoded 1354
IdentityServer4.Hosting.CorsPolicyProvider:Debug: CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Route matched with {action = "Index", controller = "Consent"}. Executing action IdentityServer4.Quickstart.UI.ConsentController.Index (Marvin.IDP)
Microsoft.AspNetCore.Authorization.DefaultAuthorizationService:Information: Authorization was successful.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executing action method IdentityServer4.Quickstart.UI.ConsentController.Index (Marvin.IDP) with arguments (IdentityServer4.Quickstart.UI.ConsentInputModel) - Validation state: Valid
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Start authorize request protocol validation
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Checking for PKCE parameters
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: No PKCE used.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action method IdentityServer4.Quickstart.UI.ConsentController.Index (Marvin.IDP), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 29.4619ms.
Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor:Information: Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=imagegalleryclient&redirect_uri=https%3A%2F%2Flocalhost%3A44393%2Fsignin-oidc&response_type=code%20id_token&scope=openid%20profile%20address%20roles%20country%20subscriptionlevel%20imagegalleryapi%20offline_access&response_mode=form_post&nonce=636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx&state=CfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=5.3.0.0.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action IdentityServer4.Quickstart.UI.ConsentController.Index (Marvin.IDP) in 76.2135ms
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 91.6087ms 302

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/2.0 GET https://localhost:44314/connect/authorize/callback?client_id=imagegalleryclient&redirect_uri=https%3A%2F%2Flocalhost%3A44393%2Fsignin-oidc&response_type=code%20id_token&scope=openid%20profile%20address%20roles%20country%20subscriptionlevel%20imagegalleryapi%20offline_access&response_mode=form_post&nonce=636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx&state=CfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=5.3.0.0
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/authorize/callback matched to endpoint type Authorize
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
IdentityServer4.Endpoints.AuthorizeCallbackEndpoint:Debug: Start authorize callback request
IdentityServer4.Endpoints.AuthorizeCallbackEndpoint:Debug: User in authorize request: b7539694-97e7-4dfe-84da-b4256e1ff5c7
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Start authorize request protocol validation
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Checking for PKCE parameters
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: No PKCE used.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
IdentityServer4.Endpoints.AuthorizeCallbackEndpoint:Information: ValidatedAuthorizeRequest
{
  "ClientId": "imagegalleryclient",
  "ClientName": "Image Gallery",
  "RedirectUri": "https://localhost:44393/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:44393/signin-oidc"
  ],
  "SubjectId": "b7539694-97e7-4dfe-84da-b4256e1ff5c7",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile address roles country subscriptionlevel imagegalleryapi offline_access",
  "State": "CfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA",
  "Nonce": "636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx",
  "SessionId": "5b73657e8454150cc39436120d1a4224",
  "Raw": {
    "client_id": "imagegalleryclient",
    "redirect_uri": "https://localhost:44393/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile address roles country subscriptionlevel imagegalleryapi offline_access",
    "response_mode": "form_post",
    "nonce": "636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx",
    "state": "CfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA",
    "x-client-SKU": "ID_NETSTANDARD2_0",
    "x-client-ver": "5.3.0.0"
  }
}
IdentityServer4.Test.TestUserProfileService:Debug: IsActive called from: AuthorizeEndpoint
IdentityServer4.Services.DefaultConsentService:Debug: Scopes contains offline_access, consent is required
IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator:Information: User consented to scopes: openid, profile, address, roles, country, subscriptionlevel, imagegalleryapi, offline_access
IdentityServer4.Services.DefaultConsentService:Debug: Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: b7539694-97e7-4dfe-84da-b4256e1ff5c7
IdentityServer4.ResponseHandling.AuthorizeResponseGenerator:Debug: Creating Hybrid Flow response.
IdentityServer4.ResponseHandling.AuthorizeResponseGenerator:Debug: Creating Implicit Flow response.
IdentityServer4.Services.DefaultClaimsService:Debug: Getting claims for identity token for subject: b7539694-97e7-4dfe-84da-b4256e1ff5c7 and client: imagegalleryclient
IdentityServer4.Services.DefaultClaimsService:Debug: In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
IdentityServer4.Endpoints.AuthorizeCallbackEndpoint:Information: Authorize endpoint response
{
  "SubjectId": "b7539694-97e7-4dfe-84da-b4256e1ff5c7",
  "ClientId": "imagegalleryclient",
  "RedirectUri": "https://localhost:44393/signin-oidc",
  "State": "CfDJ8HghKrsNTG1Ijn_2fLmnscvbXgMtvQXqSJI9MFssqtxOO3aqXvEnDWUVFdksZAJ0Um6LhZlWR--_BXvDOsMZPWvLH2ouWJVXFlnXFkISbOQOXKqn--31y-hH1AJRXLZ2z5F9e4yNPv66aBd8ROlTrbj7mF9jo8JqNCE84K8rNOAvVrqRiTZaIEpnwiizCaLqHudCB-u-0Rr7l_Rv4wjlfFUTKjsv8bY-iCpsnPgTyVV1s4lnMLhfjTGJ1g_BBs-KfQPrq-fMfXuLEu8nFC5jX2ueFmHVCq9oQ0bZjcR8E22JMW5KOdLxOUMDzfJn3UMOsTpuG3iUn1UTtxK9OUx2smA",
  "Scope": "openid profile address roles country subscriptionlevel imagegalleryapi offline_access"
}
IdentityServer4.Hosting.IdentityServerAuthenticationService:Debug: Augmenting SignInContext
Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler:Information: AuthenticationScheme: idsrv signed in.
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 205.2294ms 200 text/html; charset=UTF-8

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 GET https://localhost:44314/.well-known/openid-configuration
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /.well-known/openid-configuration matched to endpoint type Discovery
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
IdentityServer4.Endpoints.DiscoveryEndpoint:Debug: Start discovery request
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 32.5652ms 200 application/json; charset=UTF-8

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 GET https://localhost:44314/.well-known/openid-configuration/jwks
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
IdentityServer4.Endpoints.DiscoveryKeyEndpoint:Debug: Start key discovery request
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 32.3546ms 200 application/jwk-set+json; charset=UTF-8

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 POST https://localhost:44314/connect/token application/x-www-form-urlencoded 221
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/token matched to endpoint type Token
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
IdentityServer4.Endpoints.TokenEndpoint:Debug: Start token request.
IdentityServer4.Validation.ClientSecretValidator:Debug: Start client validation
IdentityServer4.Validation.BasicAuthenticationSecretParser:Debug: Start parsing Basic Authentication secret
IdentityServer4.Validation.PostBodySecretParser:Debug: Start parsing for secret in post body
IdentityServer4.Validation.SecretParser:Debug: Parser found secret: PostBodySecretParser
IdentityServer4.Validation.SecretParser:Debug: Secret id found: imagegalleryclient
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.SecretValidator:Debug: Secret validator success: HashedSharedSecretValidator
IdentityServer4.Validation.ClientSecretValidator:Debug: Client validation success
IdentityServer4.Validation.TokenRequestValidator:Debug: Start token request validation
IdentityServer4.Validation.TokenRequestValidator:Debug: Start validation of authorization code token request
IdentityServer4.Test.TestUserProfileService:Debug: IsActive called from: AuthorizationCodeValidation
IdentityServer4.Validation.TokenRequestValidator:Debug: Validation of authorization code token request success
IdentityServer4.Validation.TokenRequestValidator:Information: Token request validation success
{
  "ClientId": "imagegalleryclient",
  "ClientName": "Image Gallery",
  "GrantType": "authorization_code",
  "AuthorizationCode": "b8af1f9f5ffb19dcdbac31daa7009fe78cf305b704d7d6d135e45793f6992b97",
  "Raw": {
    "client_id": "imagegalleryclient",
    "client_secret": "***REDACTED***",
    "code": "b8af1f9f5ffb19dcdbac31daa7009fe78cf305b704d7d6d135e45793f6992b97",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:44393/signin-oidc"
  }
}
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Services.DefaultClaimsService:Debug: Getting claims for access token for client: imagegalleryclient
IdentityServer4.Services.DefaultClaimsService:Debug: Getting claims for access token for subject: b7539694-97e7-4dfe-84da-b4256e1ff5c7
IdentityServer4.Test.TestUserProfileService:Debug: Get profile called for subject b7539694-97e7-4dfe-84da-b4256e1ff5c7 from client Image Gallery with claim types role via ClaimsProviderAccessToken
IdentityServer4.Test.TestUserProfileService:Debug: Issued claims: role
IdentityServer4.Services.DefaultRefreshTokenService:Debug: Creating refresh token
IdentityServer4.Services.DefaultRefreshTokenService:Debug: Setting an absolute lifetime: 2592000
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Services.DefaultClaimsService:Debug: Getting claims for identity token for subject: b7539694-97e7-4dfe-84da-b4256e1ff5c7 and client: imagegalleryclient
IdentityServer4.Services.DefaultClaimsService:Debug: In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
IdentityServer4.Endpoints.TokenEndpoint:Debug: Token request success.
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 181.2515ms 200 application/json; charset=UTF-8

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 GET https://localhost:44314/connect/userinfo
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/userinfo matched to endpoint type Userinfo
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
IdentityServer4.Endpoints.UserInfoEndpoint:Debug: Start userinfo request
IdentityServer4.Validation.BearerTokenUsageValidator:Debug: Bearer token found in header
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Test.TestUserProfileService:Debug: IsActive called from: AccessTokenValidation
IdentityServer4.Validation.TokenValidator:Debug: Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
IdentityServer4.Validation.TokenValidator:Debug: Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "6195989c3250f3104fb74e105eb448f5d9483b56fc9c30313692563db9cb9065",
  "Claims": {
    "iss": "https://localhost:44314",
    "nbf": 1559248581,
    "exp": 1559248701,
    "aud": [
      "https://localhost:44314/resources",
      "imagegalleryapi"
    ],
    "client_id": "imagegalleryclient",
    "scope": [
      "openid",
      "profile",
      "address",
      "roles",
      "country",
      "subscriptionlevel",
      "imagegalleryapi",
      "offline_access"
    ],
    "sub": "b7539694-97e7-4dfe-84da-b4256e1ff5c7",
    "auth_time": 1559248555,
    "idp": "local",
    "amr": "pwd",
    "role": "PayingUser"
  }
}
IdentityServer4.Test.TestUserProfileService:Debug: IsActive called from: UserInfoRequestValidation
IdentityServer4.ResponseHandling.UserInfoResponseGenerator:Debug: Creating userinfo response
IdentityServer4.ResponseHandling.UserInfoResponseGenerator:Debug: Scopes in access token: openid profile address roles country subscriptionlevel imagegalleryapi offline_access
IdentityServer4.ResponseHandling.UserInfoResponseGenerator:Debug: Scopes in access token: openid profile address roles country subscriptionlevel imagegalleryapi offline_access
IdentityServer4.ResponseHandling.UserInfoResponseGenerator:Debug: Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at address role country subscriptionlevel
IdentityServer4.ResponseHandling.UserInfoResponseGenerator:Debug: Scopes in access token: openid profile address roles country subscriptionlevel imagegalleryapi offline_access
IdentityServer4.Test.TestUserProfileService:Debug: Get profile called for subject b7539694-97e7-4dfe-84da-b4256e1ff5c7 from client Image Gallery with claim types sub, name, family_name, given_name, middle_name, nickname, preferred_username, profile, picture, website, gender, birthdate, zoneinfo, locale, updated_at, address, role, country, subscriptionlevel via UserInfoEndpoint
IdentityServer4.Test.TestUserProfileService:Debug: Issued claims: given_name, family_name, address, role, country, subscriptionlevel
IdentityServer4.ResponseHandling.UserInfoResponseGenerator:Information: Profile service returned the following claim types: given_name family_name address role country subscriptionlevel
IdentityServer4.Endpoints.UserInfoEndpoint:Debug: End userinfo request
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 97.9202ms 200 application/json; charset=UTF-8

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 GET https://localhost:44314/.well-known/openid-configuration
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /.well-known/openid-configuration matched to endpoint type Discovery
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
IdentityServer4.Endpoints.DiscoveryEndpoint:Debug: Start discovery request
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 12.7776ms 200 application/json; charset=UTF-8

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 GET https://localhost:44314/.well-known/openid-configuration/jwks
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
IdentityServer4.Endpoints.DiscoveryKeyEndpoint:Debug: Start key discovery request
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 21.5842ms 200 application/jwk-set+json; charset=UTF-8

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 POST https://localhost:44314/connect/introspect application/x-www-form-urlencoded 156
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/introspect matched to endpoint type Introspection
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
IdentityServer4.Endpoints.IntrospectionEndpoint:Debug: Starting introspection request.
IdentityServer4.Validation.BasicAuthenticationSecretParser:Debug: Start parsing Basic Authentication secret
IdentityServer4.Validation.PostBodySecretParser:Debug: Start parsing for secret in post body
IdentityServer4.Validation.SecretParser:Debug: Parser found secret: PostBodySecretParser
IdentityServer4.Validation.SecretParser:Debug: Secret id found: imagegalleryapi
IdentityServer4.Validation.SecretValidator:Debug: Secret validator success: HashedSharedSecretValidator
IdentityServer4.Validation.ApiSecretValidator:Debug: API resource validation success
IdentityServer4.Validation.IntrospectionRequestValidator:Debug: Introspection request validation started.
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Test.TestUserProfileService:Debug: IsActive called from: AccessTokenValidation
IdentityServer4.Validation.TokenValidator:Debug: Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
IdentityServer4.Validation.TokenValidator:Debug: Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "6195989c3250f3104fb74e105eb448f5d9483b56fc9c30313692563db9cb9065",
  "Claims": {
    "iss": "https://localhost:44314",
    "nbf": 1559248581,
    "exp": 1559248701,
    "aud": [
      "https://localhost:44314/resources",
      "imagegalleryapi"
    ],
    "client_id": "imagegalleryclient",
    "scope": [
      "openid",
      "profile",
      "address",
      "roles",
      "country",
      "subscriptionlevel",
      "imagegalleryapi",
      "offline_access"
    ],
    "sub": "b7539694-97e7-4dfe-84da-b4256e1ff5c7",
    "auth_time": 1559248555,
    "idp": "local",
    "amr": "pwd",
    "role": "PayingUser"
  }
}
IdentityServer4.Validation.IntrospectionRequestValidator:Debug: Introspection request validation successful.
IdentityServer4.ResponseHandling.IntrospectionResponseGenerator:Debug: Creating introspection response for active token.
IdentityServer4.Endpoints.IntrospectionEndpoint:Information: Success token introspection. Token active: True, for API name: imagegalleryapi
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 63.3065ms 200 application/json; charset=UTF-8

QQHQ :: HOME PAGE SHOWN

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 POST https://localhost:44314/connect/introspect application/x-www-form-urlencoded 156
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/introspect matched to endpoint type Introspection
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
IdentityServer4.Endpoints.IntrospectionEndpoint:Debug: Starting introspection request.
IdentityServer4.Validation.BasicAuthenticationSecretParser:Debug: Start parsing Basic Authentication secret
IdentityServer4.Validation.PostBodySecretParser:Debug: Start parsing for secret in post body
IdentityServer4.Validation.SecretParser:Debug: Parser found secret: PostBodySecretParser
IdentityServer4.Validation.SecretParser:Debug: Secret id found: imagegalleryapi
IdentityServer4.Validation.SecretValidator:Debug: Secret validator success: HashedSharedSecretValidator
IdentityServer4.Validation.ApiSecretValidator:Debug: API resource validation success
IdentityServer4.Validation.IntrospectionRequestValidator:Debug: Introspection request validation started.
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Test.TestUserProfileService:Debug: IsActive called from: AccessTokenValidation
IdentityServer4.Validation.TokenValidator:Debug: Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
IdentityServer4.Validation.TokenValidator:Debug: Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "6195989c3250f3104fb74e105eb448f5d9483b56fc9c30313692563db9cb9065",
  "Claims": {
    "iss": "https://localhost:44314",
    "nbf": 1559248581,
    "exp": 1559248701,
    "aud": [
      "https://localhost:44314/resources",
      "imagegalleryapi"
    ],
    "client_id": "imagegalleryclient",
    "scope": [
      "openid",
      "profile",
      "address",
      "roles",
      "country",
      "subscriptionlevel",
      "imagegalleryapi",
      "offline_access"
    ],
    "sub": "b7539694-97e7-4dfe-84da-b4256e1ff5c7",
    "auth_time": 1559248555,
    "idp": "local",
    "amr": "pwd",
    "role": "PayingUser"
  }
}
IdentityServer4.Validation.IntrospectionRequestValidator:Debug: Introspection request validation successful.
IdentityServer4.ResponseHandling.IntrospectionResponseGenerator:Debug: Creating introspection response for active token.
IdentityServer4.Endpoints.IntrospectionEndpoint:Information: Success token introspection. Token active: True, for API name: imagegalleryapi
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 41.8719ms 200 application/json; charset=UTF-8

QQHQ :: EDIT PAGE

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 POST https://localhost:44314/connect/introspect application/x-www-form-urlencoded 156
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/introspect matched to endpoint type Introspection
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
IdentityServer4.Endpoints.IntrospectionEndpoint:Debug: Starting introspection request.
IdentityServer4.Validation.BasicAuthenticationSecretParser:Debug: Start parsing Basic Authentication secret
IdentityServer4.Validation.PostBodySecretParser:Debug: Start parsing for secret in post body
IdentityServer4.Validation.SecretParser:Debug: Parser found secret: PostBodySecretParser
IdentityServer4.Validation.SecretParser:Debug: Secret id found: imagegalleryapi
IdentityServer4.Validation.SecretValidator:Debug: Secret validator success: HashedSharedSecretValidator
IdentityServer4.Validation.ApiSecretValidator:Debug: API resource validation success
IdentityServer4.Validation.IntrospectionRequestValidator:Debug: Introspection request validation started.
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Test.TestUserProfileService:Debug: IsActive called from: AccessTokenValidation
IdentityServer4.Validation.TokenValidator:Debug: Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
IdentityServer4.Validation.TokenValidator:Debug: Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "6195989c3250f3104fb74e105eb448f5d9483b56fc9c30313692563db9cb9065",
  "Claims": {
    "iss": "https://localhost:44314",
    "nbf": 1559248581,
    "exp": 1559248701,
    "aud": [
      "https://localhost:44314/resources",
      "imagegalleryapi"
    ],
    "client_id": "imagegalleryclient",
    "scope": [
      "openid",
      "profile",
      "address",
      "roles",
      "country",
      "subscriptionlevel",
      "imagegalleryapi",
      "offline_access"
    ],
    "sub": "b7539694-97e7-4dfe-84da-b4256e1ff5c7",
    "auth_time": 1559248555,
    "idp": "local",
    "amr": "pwd",
    "role": "PayingUser"
  }
}
IdentityServer4.Validation.IntrospectionRequestValidator:Debug: Introspection request validation successful.
IdentityServer4.ResponseHandling.IntrospectionResponseGenerator:Debug: Creating introspection response for active token.
IdentityServer4.Endpoints.IntrospectionEndpoint:Information: Success token introspection. Token active: True, for API name: imagegalleryapi
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 38.7602ms 200 application/json; charset=UTF-8

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 POST https://localhost:44314/connect/introspect application/x-www-form-urlencoded 156
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/introspect matched to endpoint type Introspection
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
IdentityServer4.Endpoints.IntrospectionEndpoint:Debug: Starting introspection request.
IdentityServer4.Validation.BasicAuthenticationSecretParser:Debug: Start parsing Basic Authentication secret
IdentityServer4.Validation.PostBodySecretParser:Debug: Start parsing for secret in post body
IdentityServer4.Validation.SecretParser:Debug: Parser found secret: PostBodySecretParser
IdentityServer4.Validation.SecretParser:Debug: Secret id found: imagegalleryapi
IdentityServer4.Validation.SecretValidator:Debug: Secret validator success: HashedSharedSecretValidator
IdentityServer4.Validation.ApiSecretValidator:Debug: API resource validation success
IdentityServer4.Validation.IntrospectionRequestValidator:Debug: Introspection request validation started.
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Test.TestUserProfileService:Debug: IsActive called from: AccessTokenValidation
IdentityServer4.Validation.TokenValidator:Debug: Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
IdentityServer4.Validation.TokenValidator:Debug: Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "6195989c3250f3104fb74e105eb448f5d9483b56fc9c30313692563db9cb9065",
  "Claims": {
    "iss": "https://localhost:44314",
    "nbf": 1559248581,
    "exp": 1559248701,
    "aud": [
      "https://localhost:44314/resources",
      "imagegalleryapi"
    ],
    "client_id": "imagegalleryclient",
    "scope": [
      "openid",
      "profile",
      "address",
      "roles",
      "country",
      "subscriptionlevel",
      "imagegalleryapi",
      "offline_access"
    ],
    "sub": "b7539694-97e7-4dfe-84da-b4256e1ff5c7",
    "auth_time": 1559248555,
    "idp": "local",
    "amr": "pwd",
    "role": "PayingUser"
  }
}
IdentityServer4.Validation.IntrospectionRequestValidator:Debug: Introspection request validation successful.
IdentityServer4.ResponseHandling.IntrospectionResponseGenerator:Debug: Creating introspection response for active token.
IdentityServer4.Endpoints.IntrospectionEndpoint:Information: Success token introspection. Token active: True, for API name: imagegalleryapi
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 42.4639ms 200 application/json; charset=UTF-8

QQHQ :: HOME AFTER EDIT

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 GET https://localhost:44314/.well-known/openid-configuration
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /.well-known/openid-configuration matched to endpoint type Discovery
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
IdentityServer4.Endpoints.DiscoveryEndpoint:Debug: Start discovery request
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 9.3961ms 200 application/json; charset=UTF-8

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 GET https://localhost:44314/.well-known/openid-configuration/jwks
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
IdentityServer4.Endpoints.DiscoveryKeyEndpoint:Debug: Start key discovery request
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 19.09ms 200 application/jwk-set+json; charset=UTF-8

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 POST https://localhost:44314/connect/revocation application/x-www-form-urlencoded 162
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/revocation matched to endpoint type Revocation
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
IdentityServer4.Endpoints.TokenRevocationEndpoint:Debug: Start revocation request.
IdentityServer4.Validation.ClientSecretValidator:Debug: Start client validation
IdentityServer4.Validation.BasicAuthenticationSecretParser:Debug: Start parsing Basic Authentication secret
IdentityServer4.Validation.PostBodySecretParser:Debug: Start parsing for secret in post body
IdentityServer4.Validation.SecretParser:Debug: Parser found secret: PostBodySecretParser
IdentityServer4.Validation.SecretParser:Debug: Secret id found: imagegalleryclient
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.SecretValidator:Debug: Secret validator success: HashedSharedSecretValidator
IdentityServer4.Validation.ClientSecretValidator:Debug: Client validation success
IdentityServer4.Validation.TokenRevocationRequestValidator:Debug: Token type hint found in request: access_token
IdentityServer4.Validation.TokenRevocationRequestValidator:Debug: ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
IdentityServer4.ResponseHandling.TokenRevocationResponseGenerator:Debug: Access token revoked
IdentityServer4.Endpoints.TokenRevocationEndpoint:Information: Token successfully revoked
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 47.2359ms 200

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/1.1 POST https://localhost:44314/connect/revocation application/x-www-form-urlencoded 163
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/revocation matched to endpoint type Revocation
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
IdentityServer4.Endpoints.TokenRevocationEndpoint:Debug: Start revocation request.
IdentityServer4.Validation.ClientSecretValidator:Debug: Start client validation
IdentityServer4.Validation.BasicAuthenticationSecretParser:Debug: Start parsing Basic Authentication secret
IdentityServer4.Validation.PostBodySecretParser:Debug: Start parsing for secret in post body
IdentityServer4.Validation.SecretParser:Debug: Parser found secret: PostBodySecretParser
IdentityServer4.Validation.SecretParser:Debug: Secret id found: imagegalleryclient
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.SecretValidator:Debug: Secret validator success: HashedSharedSecretValidator
IdentityServer4.Validation.ClientSecretValidator:Debug: Client validation success
IdentityServer4.Validation.TokenRevocationRequestValidator:Debug: Token type hint found in request: refresh_token
IdentityServer4.Validation.TokenRevocationRequestValidator:Debug: ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
IdentityServer4.ResponseHandling.TokenRevocationResponseGenerator:Debug: Refresh token revoked
IdentityServer4.Endpoints.TokenRevocationEndpoint:Information: Token successfully revoked
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 41.3734ms 200

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/2.0 GET https://localhost:44314/connect/endsession?post_logout_redirect_uri=https%3A%2F%2Flocalhost%3A44393%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjAzOGRiNTljYmM4ZDAxOWI1MjQ1YzNhODIzYWM5MTg3IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NTkyNDg1ODEsImV4cCI6MTU1OTI0ODg4MSwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6NDQzMTQiLCJhdWQiOiJpbWFnZWdhbGxlcnljbGllbnQiLCJub25jZSI6IjYzNjk0ODQ1MjUzMzcxMzc0NC5NakUxTXpoaU16TXRPRGxpWXkwME5HUmhMV0UzWmpBdFpESmhOREk1WXpjMk16Vm1NRFU0TW1GaFpXSXROV0kxTlMwMFlqTTBMVGhtTVRrdFptSmhZMlZpTkdFeFpqSXgiLCJpYXQiOjE1NTkyNDg1ODEsImF0X2hhc2giOiJHdFU5T3FRVXpSREhQT3BWY0tyc21nIiwic2lkIjoiNWI3MzY1N2U4NDU0MTUwY2MzOTQzNjEyMGQxYTQyMjQiLCJzdWIiOiJiNzUzOTY5NC05N2U3LTRkZmUtODRkYS1iNDI1NmUxZmY1YzciLCJhdXRoX3RpbWUiOjE1NTkyNDg1NTUsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.HztrxGqMe1A5Ksy9T6fm87StE36T5zunD64-32GDaWFT7BUaF2B45hDu-5Zke-2F5siGvJKGYvFRNwMKt-MxGsqhXLnCITiwxBalvP6IPbzoc2emFZWOHjosR7AO8Io-NWucSm8EGiUA7kuI0bNLkqvBVw1B-YRpjj5J3qPQkEqrEZi9E6Uq7uL4AGfNllWjk8TEKec2QiLIkeABnzGzC6au8jKy5JeTkoqre7hNCIvtbfmO_sTkexuXkVIEtmHiaplpTDmjpnsh8DGII0N_AtgtfwivcPsa3ACOaXInhzfXzeBQpvKI2l0Nidelsx0_P2oZUIzZMcV8W5E__MrxtQ&state=CfDJ8HghKrsNTG1Ijn_2fLmnscuD2UC6gizUfW3qjTR85TKNrgSMInE2Z8whQi3H625HwYegFmxA5pBDSQn4lM5O9zFEeFcEaimnVi_PJChbKRKektHaCf2YMD8ewVNfnt_WhAmK3ww63h4WJS5Vytk0bJc_OHv1rL5nqA-9Obu0zbKW&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=5.3.0.0
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/endsession matched to endpoint type Endsession
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
IdentityServer4.Endpoints.EndSessionEndpoint:Debug: Processing signout request for b7539694-97e7-4dfe-84da-b4256e1ff5c7
IdentityServer4.Validation.EndSessionRequestValidator:Debug: Start end session request validation
IdentityServer4.Validation.TokenValidator:Debug: Start identity token validation
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.TokenValidator:Debug: Client found: imagegalleryclient / Image Gallery
IdentityServer4.Test.TestUserProfileService:Debug: IsActive called from: IdentityTokenValidation
IdentityServer4.Validation.TokenValidator:Debug: Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
IdentityServer4.Validation.TokenValidator:Debug: Token validation success
{
  "ClientId": "imagegalleryclient",
  "ClientName": "Image Gallery",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1559248581,
    "exp": 1559248881,
    "iss": "https://localhost:44314",
    "aud": "imagegalleryclient",
    "nonce": "636948452533713744.MjE1MzhiMzMtODliYy00NGRhLWE3ZjAtZDJhNDI5Yzc2MzVmMDU4MmFhZWItNWI1NS00YjM0LThmMTktZmJhY2ViNGExZjIx",
    "iat": 1559248581,
    "at_hash": "GtU9OqQUzRDHPOpVcKrsmg",
    "sid": "5b73657e8454150cc39436120d1a4224",
    "sub": "b7539694-97e7-4dfe-84da-b4256e1ff5c7",
    "auth_time": 1559248555,
    "idp": "local",
    "amr": "pwd"
  }
}
IdentityServer4.Validation.EndSessionRequestValidator:Information: End session request validation success
{
  "ClientId": "imagegalleryclient",
  "ClientName": "Image Gallery",
  "SubjectId": "b7539694-97e7-4dfe-84da-b4256e1ff5c7",
  "PostLogOutUri": "https://localhost:44393/signout-callback-oidc",
  "State": "CfDJ8HghKrsNTG1Ijn_2fLmnscuD2UC6gizUfW3qjTR85TKNrgSMInE2Z8whQi3H625HwYegFmxA5pBDSQn4lM5O9zFEeFcEaimnVi_PJChbKRKektHaCf2YMD8ewVNfnt_WhAmK3ww63h4WJS5Vytk0bJc_OHv1rL5nqA-9Obu0zbKW",
  "Raw": {
    "post_logout_redirect_uri": "https://localhost:44393/signout-callback-oidc",
    "id_token_hint": "***REDACTED***",
    "state": "CfDJ8HghKrsNTG1Ijn_2fLmnscuD2UC6gizUfW3qjTR85TKNrgSMInE2Z8whQi3H625HwYegFmxA5pBDSQn4lM5O9zFEeFcEaimnVi_PJChbKRKektHaCf2YMD8ewVNfnt_WhAmK3ww63h4WJS5Vytk0bJc_OHv1rL5nqA-9Obu0zbKW",
    "x-client-SKU": "ID_NETSTANDARD2_0",
    "x-client-ver": "5.3.0.0"
  }
}
IdentityServer4.Endpoints.EndSessionEndpoint:Debug: Success validating end session request from imagegalleryclient
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 74.4642ms 302

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/2.0 GET https://localhost:44314/Account/Logout?logoutId=CfDJ8HghKrsNTG1Ijn_2fLmnscs1rJGHep6dODckyKPQn3gIzPFUWPpTJYfDJiUzjwOirgBge0-muPEydMubAVn6oPZyAV6ogZhOssJvXxP4ALgh2N_AGXEpWYpweFKyIZHBzGnoUCbCUUfGF0TZ-Lb3IVgQ6LlZw0Vkog-t-dgsZoTLxTzpz_7CkhNOLchaCyC1uy1Dmq8X-oxYiHczKthwoCyYr-f-ciKjedvIsSq4hJxVVQSnJpQ3dG7ikNpsy0gf3OpBC_cd1rwFbDG8818XJy-I2erTBiWS9lpO5zB2SkPyuIokkmsZlWOpv6_tY84u_fO9nNc03PCXkw4220oQE_R8oPDTDAgTuYafHWoU0w0pRLb9fNXtKlxSZw2OCINiKHuF70B7rOKvfcSeqKRIPD2DzNF29ChqndTu7UR5O2Rj23yKu4ohplNQJEX11OTj5erG6ofZELlkulq4VhkJDbL80b49aY9mePMZxxIX2ihvjxzSOdsvOeKHZbEGoua-0uxVDMk0L-XZ6fBlLHGu8cPJZ5WfypnlVegUbE4dmMsns5062y84Iq1L2olhDmN6SXnDUosO5pFEdQJyikbY8ivxAZQGsLFCSlYXYCkHO7LwXSlb7r8y8--rY3DrAd2jviNjUoBuoMDirxVShQ5iL32eDtlvIdLce5H2vN5rKkhIDTXJdDdJbSgOK1gp_UvIWb5JJsMXUS4e2Ckb-POT7CZPpGPbbdmRFC0qBnr8qOMl5ezupZmFjDJO1SS6_ms0ozRVs2pKHHesSZvh6thmMhjFyDlz1YVqJVdZXFlf7L8LsQsN1DD-M8TjzvStGxuj9LAoyM45qSBHD7f-pRED5hEStIrDR7qsgw-agHVD07-2-NXa9lWkmcgJ5PXUldTeMml4DI77FZ20R2XKHwsH-AQ
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Route matched with {action = "Logout", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Logout (Marvin.IDP)
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executing action method IdentityServer4.Quickstart.UI.AccountController.Logout (Marvin.IDP) with arguments (CfDJ8HghKrsNTG1Ijn_2fLmnscs1rJGHep6dODckyKPQn3gIzPFUWPpTJYfDJiUzjwOirgBge0-muPEydMubAVn6oPZyAV6ogZhOssJvXxP4ALgh2N_AGXEpWYpweFKyIZHBzGnoUCbCUUfGF0TZ-Lb3IVgQ6LlZw0Vkog-t-dgsZoTLxTzpz_7CkhNOLchaCyC1uy1Dmq8X-oxYiHczKthwoCyYr-f-ciKjedvIsSq4hJxVVQSnJpQ3dG7ikNpsy0gf3OpBC_cd1rwFbDG8818XJy-I2erTBiWS9lpO5zB2SkPyuIokkmsZlWOpv6_tY84u_fO9nNc03PCXkw4220oQE_R8oPDTDAgTuYafHWoU0w0pRLb9fNXtKlxSZw2OCINiKHuF70B7rOKvfcSeqKRIPD2DzNF29ChqndTu7UR5O2Rj23yKu4ohplNQJEX11OTj5erG6ofZELlkulq4VhkJDbL80b49aY9mePMZxxIX2ihvjxzSOdsvOeKHZbEGoua-0uxVDMk0L-XZ6fBlLHGu8cPJZ5WfypnlVegUbE4dmMsns5062y84Iq1L2olhDmN6SXnDUosO5pFEdQJyikbY8ivxAZQGsLFCSlYXYCkHO7LwXSlb7r8y8--rY3DrAd2jviNjUoBuoMDirxVShQ5iL32eDtlvIdLce5H2vN5rKkhIDTXJdDdJbSgOK1gp_UvIWb5JJsMXUS4e2Ckb-POT7CZPpGPbbdmRFC0qBnr8qOMl5ezupZmFjDJO1SS6_ms0ozRVs2pKHHesSZvh6thmMhjFyDlz1YVqJVdZXFlf7L8LsQsN1DD-M8TjzvStGxuj9LAoyM45qSBHD7f-pRED5hEStIrDR7qsgw-agHVD07-2-NXa9lWkmcgJ5PXUldTeMml4DI77FZ20R2XKHwsH-AQ) - Validation state: Valid
Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler:Information: AuthenticationScheme: idsrv signed out.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action method IdentityServer4.Quickstart.UI.AccountController.Logout (Marvin.IDP), returned result Microsoft.AspNetCore.Mvc.ViewResult in 29.882ms.
Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor:Information: Executing ViewResult, running view LoggedOut.
Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor:Information: Executed ViewResult - view LoggedOut executed in 23.8442ms.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action IdentityServer4.Quickstart.UI.AccountController.Logout (Marvin.IDP) in 93.3226ms
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 102.5496ms 200 text/html; charset=utf-8

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/2.0 GET https://localhost:44314/connect/endsession/callback?endSessionId=CfDJ8HghKrsNTG1Ijn_2fLmnscvKCgoYFsn6TAGZvKAtxQ0IXzkqRYJ35pD2TrC18-cXKWGtycl3TBDTb0sw1aSBx5t2HvdSIo0o0rwTtDWRO3Tao_Imsp8NGPkKQBgCUN2vSirwjkj1UnmBWpMDG6Odb5_D8NBo95PFPqgqrMc-OA3Thz3OPRItFhCK0x2kJPoJXnyG43bDH2UX2k3jk0oPibTbkSEVTAXgtN3-LvHP_4OSoAtptfebHtSNob9zfQ8v7E6QFG-NhqRDNm-rQzWhxS-Ev3d479871dKb7KWY0yQIVD06dg_qXwee56Nh16gZ0isTnGsWFjl73HyAqRUfNHM
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/endsession/callback matched to endpoint type Endsession
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
IdentityServer4.Endpoints.EndSessionCallbackEndpoint:Debug: Processing signout callback request
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.EndSessionRequestValidator:Debug: No client front-channel logout URLs
IdentityServer4.Validation.EndSessionRequestValidator:Debug: No client back-channel logout URLs
IdentityServer4.Endpoints.EndSessionCallbackEndpoint:Information: Successful signout callback.
IdentityServer4.Endpoints.EndSessionCallbackEndpoint:Debug: No client front-channel iframe urls
IdentityServer4.Endpoints.EndSessionCallbackEndpoint:Debug: No client back-channel iframe urls
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 103.5062ms 200 text/html; charset=UTF-8

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/2.0 GET https://localhost:44314/connect/authorize?client_id=imagegalleryclient&redirect_uri=https%3A%2F%2Flocalhost%3A44393%2Fsignin-oidc&response_type=code%20id_token&scope=openid%20profile%20address%20roles%20country%20subscriptionlevel%20imagegalleryapi%20offline_access&response_mode=form_post&nonce=636948454366965534.YWFhYTYzMTYtMjNkOC00MTBlLWI0OWUtNWI2NmM4NTliNzhlYzIxODQ5ZDEtM2UwMS00YTU4LWJlYzYtYjRlYWQ0ZmQyZTk0&state=CfDJ8HghKrsNTG1Ijn_2fLmnscvuID-Ik8oyowSsl8q9w31NpOcnR4s5YdPTgx_SzjK51evK_VbkTGZqhTaV9P-Hi9gzCLONwqACIp507zbmw-IPwD-3Ghd0KLmQd1v6xC1Cpoy7vUKIUu9enSNSzMM6wT32uoXk779rstMOXrg6L_h7aQe_9nDQC_yreBTVmRUWNzwANrAut54tBPBanKnWbSvZQ75NSxwGNz4-aHAqMKUxH7Lrj7j6mmTCjGWTiAHRzQB-Pwv9zDoiIprpNxdBPKKboJUWnpdugRWZH01b47q5RW4_mWVpO6PhQhpD3qh_8WWQ5iYDHJiAC-dUX_2cSLk&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=5.3.0.0
IdentityServer4.Hosting.EndpointRouter:Debug: Request path /connect/authorize matched to endpoint type Authorize
IdentityServer4.Hosting.EndpointRouter:Debug: Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
IdentityServer4.Hosting.IdentityServerMiddleware:Information: Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
IdentityServer4.Endpoints.AuthorizeEndpoint:Debug: Start authorize request
IdentityServer4.Endpoints.AuthorizeEndpoint:Debug: No user present in authorize request
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Start authorize request protocol validation
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Checking for PKCE parameters
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: No PKCE used.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
IdentityServer4.Endpoints.AuthorizeEndpoint:Information: ValidatedAuthorizeRequest
{
  "ClientId": "imagegalleryclient",
  "ClientName": "Image Gallery",
  "RedirectUri": "https://localhost:44393/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:44393/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile address roles country subscriptionlevel imagegalleryapi offline_access",
  "State": "CfDJ8HghKrsNTG1Ijn_2fLmnscvuID-Ik8oyowSsl8q9w31NpOcnR4s5YdPTgx_SzjK51evK_VbkTGZqhTaV9P-Hi9gzCLONwqACIp507zbmw-IPwD-3Ghd0KLmQd1v6xC1Cpoy7vUKIUu9enSNSzMM6wT32uoXk779rstMOXrg6L_h7aQe_9nDQC_yreBTVmRUWNzwANrAut54tBPBanKnWbSvZQ75NSxwGNz4-aHAqMKUxH7Lrj7j6mmTCjGWTiAHRzQB-Pwv9zDoiIprpNxdBPKKboJUWnpdugRWZH01b47q5RW4_mWVpO6PhQhpD3qh_8WWQ5iYDHJiAC-dUX_2cSLk",
  "Nonce": "636948454366965534.YWFhYTYzMTYtMjNkOC00MTBlLWI0OWUtNWI2NmM4NTliNzhlYzIxODQ5ZDEtM2UwMS00YTU4LWJlYzYtYjRlYWQ0ZmQyZTk0",
  "Raw": {
    "client_id": "imagegalleryclient",
    "redirect_uri": "https://localhost:44393/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile address roles country subscriptionlevel imagegalleryapi offline_access",
    "response_mode": "form_post",
    "nonce": "636948454366965534.YWFhYTYzMTYtMjNkOC00MTBlLWI0OWUtNWI2NmM4NTliNzhlYzIxODQ5ZDEtM2UwMS00YTU4LWJlYzYtYjRlYWQ0ZmQyZTk0",
    "state": "CfDJ8HghKrsNTG1Ijn_2fLmnscvuID-Ik8oyowSsl8q9w31NpOcnR4s5YdPTgx_SzjK51evK_VbkTGZqhTaV9P-Hi9gzCLONwqACIp507zbmw-IPwD-3Ghd0KLmQd1v6xC1Cpoy7vUKIUu9enSNSzMM6wT32uoXk779rstMOXrg6L_h7aQe_9nDQC_yreBTVmRUWNzwANrAut54tBPBanKnWbSvZQ75NSxwGNz4-aHAqMKUxH7Lrj7j6mmTCjGWTiAHRzQB-Pwv9zDoiIprpNxdBPKKboJUWnpdugRWZH01b47q5RW4_mWVpO6PhQhpD3qh_8WWQ5iYDHJiAC-dUX_2cSLk",
    "x-client-SKU": "ID_NETSTANDARD2_0",
    "x-client-ver": "5.3.0.0"
  }
}
IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator:Information: Showing login: User is not authenticated
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 34.7323ms 302

Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request starting HTTP/2.0 GET https://localhost:44314/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dimagegalleryclient%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A44393%252Fsignin-oidc%26response_type%3Dcode%2520id_token%26scope%3Dopenid%2520profile%2520address%2520roles%2520country%2520subscriptionlevel%2520imagegalleryapi%2520offline_access%26response_mode%3Dform_post%26nonce%3D636948454366965534.YWFhYTYzMTYtMjNkOC00MTBlLWI0OWUtNWI2NmM4NTliNzhlYzIxODQ5ZDEtM2UwMS00YTU4LWJlYzYtYjRlYWQ0ZmQyZTk0%26state%3DCfDJ8HghKrsNTG1Ijn_2fLmnscvuID-Ik8oyowSsl8q9w31NpOcnR4s5YdPTgx_SzjK51evK_VbkTGZqhTaV9P-Hi9gzCLONwqACIp507zbmw-IPwD-3Ghd0KLmQd1v6xC1Cpoy7vUKIUu9enSNSzMM6wT32uoXk779rstMOXrg6L_h7aQe_9nDQC_yreBTVmRUWNzwANrAut54tBPBanKnWbSvZQ75NSxwGNz4-aHAqMKUxH7Lrj7j6mmTCjGWTiAHRzQB-Pwv9zDoiIprpNxdBPKKboJUWnpdugRWZH01b47q5RW4_mWVpO6PhQhpD3qh_8WWQ5iYDHJiAC-dUX_2cSLk%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D5.3.0.0
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Marvin.IDP)
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Marvin.IDP) with arguments (/connect/authorize/callback?client_id=imagegalleryclient&redirect_uri=https%3A%2F%2Flocalhost%3A44393%2Fsignin-oidc&response_type=code%20id_token&scope=openid%20profile%20address%20roles%20country%20subscriptionlevel%20imagegalleryapi%20offline_access&response_mode=form_post&nonce=636948454366965534.YWFhYTYzMTYtMjNkOC00MTBlLWI0OWUtNWI2NmM4NTliNzhlYzIxODQ5ZDEtM2UwMS00YTU4LWJlYzYtYjRlYWQ0ZmQyZTk0&state=CfDJ8HghKrsNTG1Ijn_2fLmnscvuID-Ik8oyowSsl8q9w31NpOcnR4s5YdPTgx_SzjK51evK_VbkTGZqhTaV9P-Hi9gzCLONwqACIp507zbmw-IPwD-3Ghd0KLmQd1v6xC1Cpoy7vUKIUu9enSNSzMM6wT32uoXk779rstMOXrg6L_h7aQe_9nDQC_yreBTVmRUWNzwANrAut54tBPBanKnWbSvZQ75NSxwGNz4-aHAqMKUxH7Lrj7j6mmTCjGWTiAHRzQB-Pwv9zDoiIprpNxdBPKKboJUWnpdugRWZH01b47q5RW4_mWVpO6PhQhpD3qh_8WWQ5iYDHJiAC-dUX_2cSLk&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=5.3.0.0) - Validation state: Valid
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Start authorize request protocol validation
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Checking for PKCE parameters
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: No PKCE used.
IdentityServer4.Validation.AuthorizeRequestValidator:Debug: Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
IdentityServer4.Stores.ValidatingClientStore:Debug: client configuration validation for client imagegalleryclient succeeded.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Marvin.IDP), returned result Microsoft.AspNetCore.Mvc.ViewResult in 11.5506ms.
Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor:Information: Executing ViewResult, running view Login.
Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor:Information: Executed ViewResult - view Login executed in 3.4223ms.
Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker:Information: Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Marvin.IDP) in 48.2675ms
Microsoft.AspNetCore.Hosting.Internal.WebHost:Information: Request finished in 55.0643ms 200 text/html; charset=utf-8

QQHQ :: LOGOUT AND LOGIN PAGE
